<!DOCTYPE HTML>
<html>
<head>
    <script src="jquery.min.js"></script>
    <script src="underscore-min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            if ("WebSocket" in window)
            {
                // Let us open a web socket
                var ws = new WebSocket("ws://localhost:8888/");
                ws.onopen = function()
                {
                    // Web Socket is connected, send data using send()
                    ws.send("Message to send");
                    alert("Message is sent...");
                };
                ws.onmessage = function (evt) 
                { 
                    var received_msg = evt.data;
                    alert("Message is received...");
                };
                ws.onclose = function()
                { 
                    // websocket is closed.
                    alert("Connection is closed..."); 
                };
                
                function handle(x,y) {
                    return function() {
                        ws.send(x + '_' + y);
                    }
                }
                _.map(_.range(81), function(t) {
                    var px = t % 9;
                    var py = Math.floor(t / 9);
                    var point = document.createElement('div');
                    $('#board').append(point);
                    $(point).addClass('point');
                    $(point).attr({
                        x: px,
                        y: py
                    });
                    $(point).click(handle(px,py));
                });
            }
            else
            {
                // The browser doesn't support WebSocket
                alert("WebSocket NOT supported by your Browser!");
            }
        });
    </script>
    <style>
        #board {
            background: url("board_9x9.png") no-repeat;
            background-size: contain;
            width: 630px;
            height: 630px;
            margin: auto;
        }
        .point {
            height: 70px;
            width: 70px;
            float: left;
           }
    </style>
</head>

<body>
    <div id="board">
        
    </div>
</body>
</html>
